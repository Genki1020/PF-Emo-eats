<div class="post-body">


 <div class="col-10">
      <div class="col-20">
          <p><%= @eatery.emo.emo_name %>を食べたい！</p>
          <%= attachment_image_tag @eatery.user, :profile_image, size: "60x50", format:'jpg', fallback:"no_image.jpg",class:"mt-3 rounded-circle"; %>
          <%= @eatery.user.account %>
      </div>
<div class="hoge">
  <% if @eatery.images.attached? %>
     <% @eatery.images.each do |image| %>

      <div class="nest-hoge">
        <button class="slick-prev slick-arrow" aria-label="Previous" type="button" style="">Previous</button>
        <%= image_tag image, :size => '650x400' %>
        <button class="slick-next slick-arrow" aria-label="Next" type="button" style="">Next</button>
      </div>

      <% end %>
  <% end %>
</div>

</div>

  <p>ショップ名：<%= @eatery.eatery_name %></p>
  <p>説明：<%= @eatery.report %></p>

   <% if @eatery.favorited_by?(current_user) %>
    <p>
      <%= link_to eatery_favorites_path(@eatery), method: :delete do %>
        ♥<%= @eatery.favorites.count %> わかる！
      <% end %>
    </p>
    <% else %>
    <p>
      <%= link_to eatery_favorites_path(@eatery), method: :post do %>
        ♡<%= @eatery.favorites.count %> わかる！
      <% end %>
    </p>
  <% end %>

  <p>住所</p>
  <p><%= @eatery.address %></p>

  <div id="map"></div>
  <style>
#map{
  height: 150px;
  width:270px;
}
</style>


  <p>投稿日時：<%= @eatery.created_at.strftime('%Y/%m/%d') %></p>
  <div>
<p>コメント件数：<%= @eatery.post_comments.count %></p>
<% @eatery.post_comments.each do |post_comment| %>
  <p> <%= attachment_image_tag @eatery.user, :profile_image, size: "60x50", format:'jpg', fallback:"no_image.jpg",class:"mt-3 rounded-circle"; %>
  <%= post_comment.user.account %></p>
  <%= post_comment.comment %>
  <%= post_comment.created_at.strftime('%Y/%m/%d') %>
  <% if post_comment.user == current_user %>
  <div>
    <%= link_to "削除", eatery_post_comment_path(post_comment.eatery, post_comment), method: :delete %>
  </div>
  <% end %>
<% end %>
</div>
<div>
<%= form_with(model:[@eatery, @post_comment], local: true) do |f| %>
  <%= f.text_area :comment, rows:'5',placeholder: "コメントをここに" %>
  <%= f.submit "送信する" %>
<% end %>
</div>
  <% if @eatery.user == current_user %>
    <td><%= link_to "編集", edit_eatery_path(@eatery),class:"btn btn-sm btn-success edit_book_7295" %></td>
<td><%= link_to "削除", eatery_path(@eatery), method: :delete ,class:"btn btn-sm btn-danger destroy_book_7295" ,data: { confirm: '本当に消しますか？' }%></td>
  <% end %>


<script type="text/javascript">
    function initMap() {
        var test ={lat: <%= @eatery.latitude %>, lng: <%= @eatery.longitude %>};
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 15,
            center: test
        });
        var transitLayer = new google.maps.TransitLayer();
        transitLayer.setMap(map);

        var contentString = '住所：<%= @eatery.address %>';
        var infowindow = new google.maps.InfoWindow({
            content: contentString
        });

        var marker = new google.maps.Marker({
            position:test,
            map: map,
            title: contentString
        });

        marker.addListener('click', function() {
            infowindow.open(map, marker);
        });
    }
</script>

<script async defer
        src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyA5TM75zeEbcLm1shfGqIXWOh14Gp2BVZ8&callback=initMap">
</script>